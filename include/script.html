<script>
// Per non mostrare le didascalie delle callout dei requisiti
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('div.callout-title-container').forEach(function (div) {
            if (div.querySelector('a[id*="req-"]')) {
                div.style.fontSize = '0';
                div.style.visibility = 'hidden';
            }
        });
    });
</script>

<script>
// Per non mostrare le didascalie delle callout dei raccomandazioni
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('div.callout-title-container').forEach(function (div) {
            if (div.querySelector('a[id*="racc-"]')) {
                div.style.fontSize = '0';
                div.style.visibility = 'hidden';
            }
        });
    });
</script>

<script>
// Per fare in modo che le ancore su capitolo 2 abbiano l'evidenziazione
window.onload = function() {
    // Quando la pagina viene caricata, evidenzia la sezione, se presente
    highlightSection(window.location.hash);

    // Gestisce i cambiamenti dell'URL quando l'utente naviga tra gli anchor
    window.onhashchange = function() {
        // Rimuove l'evidenziazione da tutte le sezioni
        document.querySelectorAll('.highlighted').forEach(function(element) {
            element.classList.remove('highlighted');
        });

        // Evidenzia la nuova sezione
        highlightSection(window.location.hash);
    };
};

function highlightSection(hash) {
    if (hash && isUpperCase(hash)) {
        // Trova la sezione corrispondente all'ID nell'URL
        let section = document.querySelector(hash);
        if (section) {
            // Aggiunge la classe per evidenziare la sezione
            section.classList.add('highlighted');
        }
    }
}

function isUpperCase(str) {
    // Controlla se la stringa contiene solo lettere maiuscole, numeri e il carattere '-'
    return /^[A-Z0-9-]+$/.test(str.replace('#', ''));
}
</script>

<script>
// per fare in modo che la terza colonna della tabella dei dati di elevato valore non mandi a capo la terza colonna
document.addEventListener('DOMContentLoaded', function() {
    var celle = document.querySelectorAll('table td'); // Seleziona tutte le celle

    celle.forEach(function(cella) {
        if(cella.textContent.trim().startsWith('REQUISITO')) {
            cella.style.whiteSpace = 'nowrap'; // Applica lo stile
        }
    });
});
</script>

<script>
    function scrollWithOffset() {
        // Controlla se c'Ã¨ un hash nella URL
        const hash = window.location.hash;

        if (hash) {
            // Verifica che l'hash corrisponda ai pattern #req- o #racc- seguito da numeri
            const regex = /^#(req|racc)-\d+$/;
            if (regex.test(hash)) {
                const targetElement = document.querySelector(hash);

                if (targetElement) {
                    // Ottieni la posizione verticale dell'elemento rispetto al documento
                    const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;

                    // Sottrai 50 pixel dall'attuale posizione di scroll
                    const offsetPosition = elementPosition - 20;

                    // Scrolla alla nuova posizione con un piccolo ritardo per permettere il rendering completo
                    setTimeout(() => {
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: "smooth"
                        });
                    }, 10); // Ritardo di 10 millisecondi
                }
            }
        }
    }

    // Esegui la funzione al caricamento della pagina con un breve ritardo
    document.addEventListener("DOMContentLoaded", function() {
        setTimeout(scrollWithOffset, 10);
    });

    // Esegui la funzione quando cambia l'ancora nella URL
    window.addEventListener("hashchange", function() {
        scrollWithOffset();
    });
</script>
